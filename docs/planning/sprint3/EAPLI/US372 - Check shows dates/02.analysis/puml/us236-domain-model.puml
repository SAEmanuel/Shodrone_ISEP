@startuml

skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

title Edit Show Request Domain Model - US236

hide circles
hide methods

package "CRM Collaborator Subsystem" {

    entity "Customer" as Customer {
      * id : String <<generated>>
      --
      * name : String
      * status : String <<enum>> {active, VIP, inactive}
    }

    entity "ShowRequest" as ShowRequest {
      * id : String <<generated>>
      --
      * numberOfDrones : Integer
      * duration : Integer
      * creationDate : DateTime
      * status : String
    }

    entity "ShowProposal" as ShowProposal {
      * id : String <<generated>>
      --
      * proposalDate : DateTime
      * status : String <<enum>> {Draft, Sent, Approved, Rejected}
      * costEstimate : Decimal
      * feasibilityNotes : String
    }

    entity "ShowDescription" as ShowDescription {
      * place : String
      * latitude : Double
      * longitude : Double
      * time : DateTime
    }

    entity "FigureExecution" as FigureExecution {
      * order : Integer
    }

    entity "Figure" as Figure {
      * id : String <<generated>>
      --
      * name : String
      * isPublic : Boolean
      * exclusivity : String
    }

    entity "ShowRequestAuthor" as ShowRequestAuthor {
      * userId : String
      * username : String
    }

    entity "ShowRequestStatus" as ShowRequestStatus {
      * status : String
      * timestamp : DateTime
      * changedBy : String
    }

    ' Relationships
    Customer ||--o{ ShowRequest : requests
    ShowRequest ||--o| ShowDescription : describes
    ShowDescription ||--o{ FigureExecution : includes
    FigureExecution ||--o{ Figure : performs
    ShowRequest ||--o| ShowRequestAuthor : createdBy
    ShowRequest ||--o{ ShowRequestStatus : hasStatus
    ShowRequest ||--o| ShowProposal : proposedAs

    ' Notes on constraints
    note right of Customer: Must be active or VIP for new requests
    note right of Figure: Must be public or exclusive to customer
    note right of ShowRequestStatus: Adds "Edited" status on update
    note right of ShowProposal: Created with "Draft" status
    note right of ShowRequest: Cannot be edited if ShowProposal exists\nCreation date cannot be changed
    note right of ShowDescription: Latitude: [-90.0, 90.0]\nLongitude: [-180.0, 180.0]\nTime: At least 72h in future

}

@enduml
