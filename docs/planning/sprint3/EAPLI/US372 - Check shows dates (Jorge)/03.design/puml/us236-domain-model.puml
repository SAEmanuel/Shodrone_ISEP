@startuml
actor "Customer" as Actor
participant "Customer App" as App
participant "TCPClient" as Client
participant "TCPServer" as Server
participant "CheckShowDatesController" as Controller
database "ShowRequestRepository" as Repo

== Cliente solicita shows ==

Actor -> App : Select "Check My Show Dates"
activate Actor
activate App

App -> Client : Send request with Customer NIF
activate Client
deactivate App
deactivate Actor

Client -> Server : JSON ObjectDTO (action: "CHECK_SHOW_DATES", nif)
activate Server
deactivate Client

== Servidor processa o pedido ==

Server -> Controller : getShowsByCustomer(nif)
activate Controller
deactivate Server

Controller -> Repo : findByCustomer(nif)
activate Repo
deactivate Controller

Repo --> Controller : List<ShowRequest>
activate Controller
deactivate Repo

alt No Shows Found
    Controller --> Server : JSON ObjectDTO (message: "No scheduled shows found for your account.")
    activate Server
    deactivate Controller

    Server --> Client : response
    activate Client
    deactivate Server

    Client --> App : Show message
    activate App
    deactivate Client
    deactivate App
else Shows Found
    Controller -> Controller : Filter out CANCELLED
    Controller -> Controller : Sort by date ascending
    Controller -> Controller : Map to List<ShowDTO>
    Controller --> Server : JSON ObjectDTO (list of shows)
    activate Server
    deactivate Controller

    Server --> Client : response
    activate Client
    deactivate Server

    Client --> App : Show list of shows
    activate App
    deactivate Client
    deactivate App
@enduml
